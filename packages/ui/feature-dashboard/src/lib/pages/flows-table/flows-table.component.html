<div class="ap-flex ap-h-full ap-mx-[30px]" [class.ap-hidden]="(areThereFlows$|async)===false">
  <div class="ap-h-full  ap-max-w-[250px]  ap-pt-[80px]" #foldersSection>
    Folders
  </div>
  <div class="ap-container ap-h-full ap-mx-auto ap-pt-[80px]">
    <div class="ap-h-full ap-mb-[40px]">
      <div class="ap-min-h-[70%] ap-rounded ap-border ap-border-solid ap-border-dividers ap-p-[30px] ap-pb-[80px]">
        <app-flows-table-title></app-flows-table-title>
        <table mat-table [dataSource]="dataSource" class="ap-w-[100%] " aria-label="Flows">
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let flow">{{ flow.version.displayName }}</td>
          </ng-container>
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let flow">
              <div class="ap-flex ap-gap-2">
                <mat-slide-toggle color="primary" [class.ap-cursor-not-allowed]="flow.instanceToggleControl.disabled"
                  (click)="$event.stopImmediatePropagation(); toggleFlowStatus(flow,flow.instanceToggleControl)"
                  [formControl]="flow.instanceToggleControl" [matTooltip]="flow.instanceToggleControl.disabled? 'Please publish the flow':
                flow.instanceToggleControl.value? 'Flow is on' : 'Flow is off'"></mat-slide-toggle>
                <div [class.ap-invisible]=" !flowsUpdateStatusRequest$[flow.id]" class="spinner-border dark-spinner"
                  role="status">
                </div>
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="created">
            <th mat-header-cell *matHeaderCellDef>Created</th>
            <td mat-cell *matCellDef="let flow">{{ flow.created | date: 'short' }}</td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell class="!ap-text-center" *matHeaderCellDef>

            </th>
            <td mat-cell *matCellDef="let flow" class="!ap-text-center">
              <ap-icon-button tooltipText="Delete Flow" iconFilename="trash.svg" color="warn" [width]="16" [height]="16"
                (click)="$event.stopImmediatePropagation(); deleteFlow(flow)"></ap-icon-button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr class="ap-cursor-pointer hover:!ap-bg-hover" (click)="openBuilder(row)" mat-row
            *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
      <div class="ap-flex ap-justify-end ap-mt-[-73px] ap-pr-[30px]">
        <ap-paginator #paginator> </ap-paginator>
      </div>
    </div>
  </div>
</div>


<app-empty-flows-table *ngIf="(areThereFlows$|async)===false"></app-empty-flows-table>
<ng-container *ngIf="archiveFlowDialogClosed$ | async"></ng-container>
<ng-container *ngFor="let obs$ of flowsUpdateStatusRequest$ | keyvalue">
  <ng-container *ngIf="obs$.value | async"></ng-container>
</ng-container>