<div [formGroup]="form" class="ap-flex ap-flex-col ap-gap-2 ">
    <ng-container formArrayName="conditionsGroups">
        <ng-container *ngFor="let cg of conditionGroups; let isFirst=first;let isLast=last; let idx=index">
            <app-branch-conditions-group-form-control (createNewConditionGroup)="addNewConditionGroup()"
                [formControl]="form.controls.conditionsGroups.at(idx)" [isFirstConditionGroup]="isFirst"
                [isLastConditionGroup]="isLast">
            </app-branch-conditions-group-form-control>
            <mat-divider *ngIf="!isLast"></mat-divider>
        </ng-container>
    </ng-container>


</div>

<ng-container *ngIf="valueChanges$ | async"></ng-container>