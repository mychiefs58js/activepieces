<button mat-menu-item (click)="expandCodeCollapse = !expandCodeCollapse">
    <div appTrackHover #hoverTracker="hoverTrackerDirective"
        class="ap-flex ap-flex-grow ap-min-h-[27px] ap-items-center">
        <mat-icon class="mat-icon-rtl-mirror">
            {{expandCodeCollapse ? 'expand_less' : 'expand_more'}}
        </mat-icon>
        <app-generic-step-mention-item [stepIndex]="stepIndex"
            [stepMention]="stepMention"></app-generic-step-mention-item>
        <div class="ap-flex-grow"></div>
        <app-button *ngIf="hoverTracker.isHovered" btnColor="primary" btnStyle="basic" type="button" btnSize="small"
            [keepBgWhite]="true" [darkLoadingSpinner]="true" (click)="$event.stopPropagation();"
            (buttonClicked)="mentionClicked.emit(stepMention)">Select
        </app-button>
    </div>
</button>

<ng-container *ngIf="mentionItemsToShow$ | async as result">
    <app-step-mentions-tree *ngIf="expandCodeCollapse" [stepOutputObjectChildNodes]="result.children"
        [markedNodesToShow]="result.markedNodesToShow" [stepDisplayName]="stepMention.step.displayName"
        (mentionClicked)=" emitMention($event)"></app-step-mentions-tree>
</ng-container>