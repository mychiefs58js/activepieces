"use strict";(self.webpackChunkactivepieces=self.webpackChunkactivepieces||[]).push([[34],{1034:(Vt,j,i)=>{i.r(j),i.d(j,{DashboardLayoutModule:()=>S});var p=i(1666),s=i(5858),g=i(1637),w=i(2188),u=i(8418),P=i(8901),I=i(814),f=i(2553),d=i(1569);class G extends P.o2{constructor(e,o,a,l,r){super(),this.pageSize$=e,this.pageCursor$=o,this.paginator=a,this.projectService=l,this.instanceRunService=r,this.data=[]}connect(){return(0,I.a)({pageCursor:this.pageCursor$,pageSize:this.pageSize$,project:this.projectService.selectedProjectAndTakeOne()}).pipe((0,f.w)(e=>this.instanceRunService.list(e.project.id,{pageSize:e.pageSize,cursor:e.pageCursor})),(0,d.b)(e=>{this.paginator.next=e.next,this.paginator.previous=e.previous,this.data=e.data}),(0,u.U)(e=>e.data))}disconnect(){}}var t=i(7480);const q=[5,10,20];var N=i(2563),Q=i(6007),D=i(6674),F=i(406),M=i(6635),H=i(1934);function K(n,e){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function X(n,e){1&n&&t.GkF(0)}const $=function(){return{width:"20px",height:"20px"}};class v{constructor(e,o){this.router=e,this.route=o,this.pageSizes=q,this.pageChanged=new t.vpe,this.pageSizeChanged=new t.vpe,this.previous=null,this.next=null}ngOnInit(){if(this.pageSizeControl=new s.NI(10,{nonNullable:!0}),this.pageSizeChanged$=this.pageSizeControl.valueChanges.pipe((0,d.b)(e=>{this.pageSizeChanged.emit(e),this.router.navigate(["."],{relativeTo:this.route,queryParams:{limit:e},queryParamsHandling:"merge"})})),this.route.snapshot.queryParamMap.get("limit")||this.route.snapshot.queryParamMap.get("cursor")){const e=Number.parseInt(this.route.snapshot.queryParamMap.get("limit"));e?this.pageSizeControl.setValue(e):this.router.navigate(["."],{relativeTo:this.route,queryParams:{pageSize:10},queryParamsHandling:"merge"})}else this.setQueryParams("")}setQueryParams(e){const o={limit:this.pageSizeControl.value};e&&(o.cursor=e),this.router.navigate(["."],{relativeTo:this.route,queryParams:o,queryParamsHandling:"merge"})}}v.\u0275fac=function(e){return new(e||v)(t.Y36(g.F0),t.Y36(g.gz))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-ap-paginator"]],inputs:{pageSizes:"pageSizes"},outputs:{pageChanged:"pageChanged",pageSizeChanged:"pageSizeChanged"},decls:12,vars:11,consts:[[1,"ap-w-full","ap-flex","ap-items-center","ap-gap-2.5","ap-justify-center"],[1,"ap-typography-caption"],["subscriptSizing","dynamic",1,"ap-max-w-[70px]"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Back","matTooltipPosition","below",3,"disabled","click"],["src","assets/img/custom/paginator/back.svg",1,"ap-flex","ap-justify-center","ap-items-center",3,"svgStyle"],["mat-icon-button","","matTooltip","Next","matTooltipPosition","below",3,"disabled","click"],["src","assets/img/custom/paginator/next.svg",1,"ap-flex","ap-justify-center","ap-items-center",3,"svgStyle"],[4,"ngIf"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Page Size:"),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-select",3),t.YNc(5,K,2,2,"mat-option",4),t.qZA()(),t.TgZ(6,"button",5),t.NdJ("click",function(){return o.pageChanged.emit(o.previous),o.setQueryParams(o.previous)}),t._UZ(7,"svg-icon",6),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return o.pageChanged.emit(o.next),o.setQueryParams(o.next)}),t._UZ(9,"svg-icon",8),t.qZA()(),t.YNc(10,X,1,0,"ng-container",9),t.ALo(11,"async")),2&e&&(t.xp6(4),t.Q6J("formControl",o.pageSizeControl),t.xp6(1),t.Q6J("ngForOf",o.pageSizes),t.xp6(1),t.Q6J("disabled",!o.previous),t.xp6(1),t.Q6J("svgStyle",t.DdM(9,$)),t.xp6(1),t.Q6J("disabled",!o.next),t.xp6(1),t.Q6J("svgStyle",t.DdM(10,$)),t.xp6(1),t.Q6J("ngIf",t.lcZ(11,7,o.pageSizeChanged$)))},dependencies:[p.sg,p.O5,s.JJ,s.oH,N.bk,Q.gM,D.KE,F.RK,M.gD,H.ey,p.Ov],encapsulation:2});var V=i(5191),W=i(2940),J=i(6710),R=i(4660);const et=(0,R.ZF)("commonState"),ot=(0,R.P1)(et,n=>n.projectsState),nt={selectProject:(0,R.P1)(ot,n=>n.projects[n.selectedIndex])};var it=i(1472),at=i(3925);class h{constructor(e,o){this.http=e,this.store=o}selectedProjectAndTakeOne(){return this.store.select(nt.selectProject).pipe((0,W.q)(1),(0,f.w)(e=>e?(0,J.of)(e):this.list().pipe((0,d.b)(o=>{this.store.dispatch(it.rV.setProjects({projects:o}))}),(0,u.U)(o=>o[0]))))}list(){return this.http.get(V.N.apiUrl+"/projects")}}h.\u0275fac=function(e){return new(e||h)(t.LFG(at.eN),t.LFG(R.yh))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});var ct=i(6264),lt=i(2002),c=i(1948);const st=[[["","actionButton",""]],[["","underTitle",""]]];class C{}function pt(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Collection"),t.qZA())}function ut(n,e){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.xp6(1),t.Oqu(o.collection_display_name)}}function mt(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Flow"),t.qZA())}function dt(n,e){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.xp6(1),t.Oqu(o.flow_display_name)}}function ht(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Started"),t.qZA())}function gt(n,e){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const o=e.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.start_time,"short"))}}function ft(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Finished"),t.qZA())}function vt(n,e){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const o=e.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.finish_time,"short"))}}function Ct(n,e){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Status"),t.qZA())}function Tt(n,e){if(1&n&&t._UZ(0,"app-state-icon",18),2&n){const o=t.oxw().$implicit,a=t.oxw();t.Q6J("succeeded",o.status===a.InstanceRunStatus.SUCCEEDED)}}function yt(n,e){1&n&&(t.ynx(0),t._uU(1," Running"),t.BQk())}function St(n,e){if(1&n&&(t.TgZ(0,"td",16),t.YNc(1,Tt,1,1,"app-state-icon",17),t.YNc(2,yt,2,0,"ng-container",13),t.qZA()),2&n){const o=e.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",o.status===a.InstanceRunStatus.SUCCEEDED||o.status===a.InstanceRunStatus.FAILED),t.xp6(1),t.Q6J("ngIf",o.status===a.InstanceRunStatus.RUNNING)}}function xt(n,e){1&n&&t._UZ(0,"tr",19)}function Zt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"tr",20),t.NdJ("click",function(){const r=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.openInstanceRun(r))}),t.qZA()}}function bt(n,e){1&n&&(t.ynx(0),t.TgZ(1,"div",21),t._uU(2," No Runs Instantiated Yet "),t.qZA(),t.BQk())}C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-page-title"]],inputs:{title:"title"},ngContentSelectors:["[actionButton]","[underTitle]"],decls:5,vars:1,consts:[[1,"ap-py-4","ap-mb-4","ap-text-left","ap-border-b-[1px]","ap-font-semibold","ap-typography-headline-6"],[1,"ap-flex"]],template:function(e,o){1&e&&(t.F$t(st),t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.Hsn(3),t.qZA(),t.Hsn(4,1),t.qZA()),2&e&&(t.xp6(2),t.hij("",o.title," "))},encapsulation:2,changeDetection:0});class Z{constructor(e,o,a,l){this.router=e,this.activatedRoute=o,this.projectService=a,this.instanceRunService=l,this.displayedColumns=["collectionName","flowName","status","started","finished"],this.InstanceRunStatus=w.I}ngOnInit(){this.dataSource=new G(this.activatedRoute.queryParams.pipe((0,u.U)(e=>e.limit||10)),this.activatedRoute.queryParams.pipe((0,u.U)(e=>e.cursor)),this.paginator,this.projectService,this.instanceRunService)}openInstanceRun(e){const o=this.router.serializeUrl(this.router.createUrlTree(["/runs"]))+"/"+e.id;window.open(o,"_blank")}instanceRunEnum(){return w.I}}Z.\u0275fac=function(e){return new(e||Z)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(h),t.Y36(ct.o))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(v,7),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},decls:24,vars:4,consts:[[1,"ap-h-full"],["title","Runs"],[1,"ap-min-h-[70%]"],["mat-table","","aria-label","Runs",1,"ap-w-[100%]",3,"dataSource"],["matColumnDef","collectionName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","flowName"],["matColumnDef","started"],["matColumnDef","finished"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["class","ap-cursor-pointer hover:!ap-bg-hover","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[1,"ap-flex","ap-justify-end"],["mat-header-cell",""],["mat-cell",""],[3,"succeeded",4,"ngIf"],[3,"succeeded"],["mat-header-row",""],["mat-row","",1,"ap-cursor-pointer","hover:!ap-bg-hover",3,"click"],[1,"ap-flex","ap-items-center","ap-justify-center","ap-h-full","ap-h-[500px]"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-page-title",1),t.TgZ(2,"div",2)(3,"table",3),t.ynx(4,4),t.YNc(5,pt,2,0,"th",5),t.YNc(6,ut,2,1,"td",6),t.BQk(),t.ynx(7,7),t.YNc(8,mt,2,0,"th",5),t.YNc(9,dt,2,1,"td",6),t.BQk(),t.ynx(10,8),t.YNc(11,ht,2,0,"th",5),t.YNc(12,gt,3,4,"td",6),t.BQk(),t.ynx(13,9),t.YNc(14,ft,2,0,"th",5),t.YNc(15,vt,3,4,"td",6),t.BQk(),t.ynx(16,10),t.YNc(17,Ct,2,0,"th",5),t.YNc(18,St,3,2,"td",6),t.BQk(),t.YNc(19,xt,1,0,"tr",11),t.YNc(20,Zt,1,0,"tr",12),t.qZA(),t.YNc(21,bt,3,0,"ng-container",13),t.qZA(),t.TgZ(22,"div",14),t._UZ(23,"app-ap-paginator"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===o.dataSource.data.length))},dependencies:[p.O5,lt.o,v,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,C,p.uU],encapsulation:2,changeDetection:0});var _t=i(8436),At=i(7362),E=i(5305);class Rt extends P.o2{constructor(e,o,a,l,r,m){super(),this.pageSize$=e,this.pageCursor$=o,this.paginator=a,this.projectService=l,this.collectionService=r,this.refresh$=m,this.data=[],this.isLoading=!0}connect(){return(0,I.a)({pageCursor:this.pageCursor$,pageSize:this.pageSize$,project:this.projectService.selectedProjectAndTakeOne(),refresh:this.refresh$}).pipe((0,d.b)(()=>{this.isLoading=!0}),(0,f.w)(e=>this.collectionService.list({projectId:e.project.id,limit:e.pageSize,cursor:e.pageCursor})),(0,E.K)(e=>{throw e}),(0,d.b)(e=>{this.paginator.next=e.next,this.paginator.previous=e.previous,this.data=e.data,this.isLoading=!1}),(0,u.U)(e=>e.data))}disconnect(){}}var T=i(6980),U=i(4470),Ut=i(7409),z=i(4356),Nt=i(9621),Dt=i(3065);function Yt(n,e){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Please write the confirmation message correctly"),t.qZA())}function jt(n,e){1&n&&t.GkF(0)}class b{constructor(e,o,a,l,r){this.formBuilder=e,this.collectionService=o,this.snackBar=a,this.collection=l,this.dialogRef=r,this.confirmationForm=this.formBuilder.group({confirmation:new s.NI("",{nonNullable:!0,validators:[s.kI.required,s.kI.pattern("DELETE")]})})}deleteCollection(){this.confirmationForm.valid&&!this.deleteCollection$&&(this.deleteCollection$=this.collectionService.delete(this.collection.id).pipe((0,E.K)(e=>(this.snackBar.open("An error occurred while deleting, please check your console","",{duration:void 0,panelClass:"error"}),console.error(e),(0,J.of)(e))),(0,u.U)(()=>{}),(0,d.b)(()=>{this.dialogRef.close(!0),this.snackBar.open(`${this.collection.version.displayName} was deleted successfully`)})))}}b.\u0275fac=function(e){return new(e||b)(t.Y36(s.qu),t.Y36(U.a),t.Y36(Ut.ux),t.Y36(T.WI),t.Y36(T.so))},b.\u0275cmp=t.Xpm({type:b,selectors:[["ng-component"]],decls:17,vars:8,consts:[[1,"ap-typography-body-1","ap-text-description","ap-mb-4"],[1,"ap-flex","ap-flex-col","ap-gap-1",3,"formGroup","submit"],["appearance","outline",1,"ap-w-full"],["formControlName","confirmation","matInput","","type","text","placeholder","ARCHIVE"],[4,"ngIf"],["align","end"],[1,"ap-flex","ap-gap-2.5"],["btnColor","basic","mat-dialog-close","","btnSize","default","btnColor","basic",3,"disabled"],["cdkFocusInitial","","btnSize","default","type","submit","btnColor","warn",3,"loading","click"]],template:function(e,o){1&e&&(t.TgZ(0,"app-dialog-title-template"),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"div",0),t._uU(4,' Please type "ARCHIVE" to confirm archiving this collection '),t.qZA(),t.TgZ(5,"form",1),t.NdJ("submit",function(){return o.deleteCollection()}),t.TgZ(6,"mat-form-field",2),t._UZ(7,"input",3),t.YNc(8,Yt,2,0,"mat-error",4),t.qZA()()(),t.TgZ(9,"mat-dialog-actions",5)(10,"div",6)(11,"app-button",7),t._uU(12," Cancel "),t.qZA(),t.TgZ(13,"app-button",8),t.NdJ("click",function(){return o.deleteCollection()}),t._uU(14," Confirm "),t.qZA()()(),t.YNc(15,jt,1,0,"ng-container",4),t.ALo(16,"async")),2&e&&(t.xp6(1),t.hij(" Archive ",o.collection.version.displayName,"\n"),t.xp6(4),t.Q6J("formGroup",o.confirmationForm),t.xp6(3),t.Q6J("ngIf",o.confirmationForm.controls.confirmation.invalid),t.xp6(3),t.Q6J("disabled",!!o.deleteCollection$),t.xp6(2),t.Q6J("loading",!!o.deleteCollection$),t.xp6(2),t.Q6J("ngIf",t.lcZ(16,6,o.deleteCollection$)))},dependencies:[p.O5,z.C,D.KE,D.TO,Nt.Nt,Dt.e,T.ZT,T.xY,T.H8,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.Ov],encapsulation:2,changeDetection:0});var k=i(4896),O=i(9247),L=i(2052);function wt(n,e){1&n&&t.GkF(0)}const Pt=function(){return{width:"360px",height:"162px"}};class _{constructor(e,o,a,l,r,m){this.router=e,this.collectionService=o,this.projectService=a,this.flowService=l,this.posthogService=r,this.authenticationService=m,this.creatingCollection=!1}createCollection(){if(!this.creatingCollection){this.creatingCollection=!0;const e="Untitled";this.createCollection$=this.projectService.selectedProjectAndTakeOne().pipe((0,f.w)(o=>this.collectionService.create({projectId:o.id,displayName:e})),(0,f.w)(o=>(this.authenticationService.currentUserSubject.value?.trackEvents&&this.posthogService.captureEvent("collection.created [Start building]",o),this.flowService.create(o.id,"Flow 1"))),(0,d.b)(o=>{this.authenticationService.currentUserSubject.value?.trackEvents&&this.posthogService.captureEvent("flow.created [Start building]",o),this.router.navigate(["/flows/",o.collectionId],{queryParams:{newCollection:!0}})}))}}}function It(n,e){1&n&&(t.TgZ(0,"th",14),t._uU(1,"Name"),t.qZA())}function Qt(n,e){if(1&n&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.xp6(1),t.Oqu(o.version.displayName)}}function Ft(n,e){1&n&&(t.TgZ(0,"th",14),t._uU(1,"Created"),t.qZA())}function $t(n,e){if(1&n&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const o=e.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.created,"short"))}}function Jt(n,e){1&n&&t._UZ(0,"th",14)}_.\u0275fac=function(e){return new(e||_)(t.Y36(g.F0),t.Y36(U.a),t.Y36(h),t.Y36(O.W),t.Y36(L.R),t.Y36(k.$))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-empty-collections-table"]],decls:13,vars:7,consts:[[1,"ap-flex","ap-flex-col","ap-gap-2","ap-h-full","ap-text-center","ap-items-center","ap-justify-center"],["src","/assets/img/custom/empty-collections.svg"],[1,"text-container"],[1,"ap-typography-headline-6","ap-font-medium"],[1,"ap-typography-body-1"],["btnCSS","btn btn-primary",1,"text-center",3,"loading","buttonClicked"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"svg-icon",1),t.TgZ(2,"div",2)(3,"div",3),t._uU(4,"Create Your First Flow"),t.qZA(),t.TgZ(5,"div",4),t._uU(6," Put Activepieces to work by creating your first flow."),t._UZ(7,"br"),t._uU(8," It's easy to build! "),t.qZA()(),t.TgZ(9,"app-button",5),t.NdJ("buttonClicked",function(){return o.createCollection()}),t._uU(10,"Start building"),t.qZA(),t.YNc(11,wt,1,0,"ng-container",6),t.ALo(12,"async"),t.qZA()),2&e&&(t.xp6(1),t.Akn(t.DdM(6,Pt)),t.xp6(8),t.Q6J("loading",o.creatingCollection),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,4,o.createCollection$)))},dependencies:[p.O5,z.C,N.bk,p.Ov],changeDetection:0});const Et=function(){return{width:"18px",height:"18px"}};function zt(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"td",15)(1,"button",16),t.NdJ("click",function(l){const m=t.CHM(o).$implicit,Y=t.oxw();return l.stopImmediatePropagation(),t.KtG(Y.archiveCollection(m))}),t._UZ(2,"svg-icon",17),t.qZA()()}2&n&&(t.xp6(2),t.Q6J("svgStyle",t.DdM(2,Et))("applyClass",!0))}function kt(n,e){1&n&&t._UZ(0,"tr",18)}function Ot(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"tr",19),t.NdJ("click",function(){const r=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.openBuilder(r))}),t.qZA()}}function Lt(n,e){1&n&&t._UZ(0,"app-empty-collections-table")}function Bt(n,e){1&n&&t.GkF(0)}function Gt(n,e){1&n&&t.GkF(0)}class A{constructor(e,o,a,l,r,m,Y,Xt){this.router=e,this.activatedRoute=o,this.authenticationService=a,this.collectionService=l,this.dialogService=r,this.projectService=m,this.flowService=Y,this.posthogService=Xt,this.creatingCollection=!1,this.displayedColumns=["name","created","action"],this.collectionArchived$=new _t.x}ngOnInit(){this.dataSource=new Rt(this.activatedRoute.queryParams.pipe((0,u.U)(e=>e.limit||10)),this.activatedRoute.queryParams.pipe((0,u.U)(e=>e.cursor)),this.paginator,this.projectService,this.collectionService,this.collectionArchived$.asObservable().pipe((0,At.O)(!0))),this.areThereCollections$=this.activatedRoute.data.pipe((0,u.U)(e=>e[B]))}openBuilder(e){this.router.navigate(["/flows/"+e.id])}archiveCollection(e){const o=this.dialogService.open(b,{data:{...e}});this.archiveCollectionDialogClosed$=o.beforeClosed().pipe((0,d.b)(a=>{a&&this.collectionArchived$.next(!0)}),(0,u.U)(()=>{}))}createCollection(){if(!this.creatingCollection){this.creatingCollection=!0;const e="Untitled";this.createCollection$=this.projectService.selectedProjectAndTakeOne().pipe((0,f.w)(o=>this.collectionService.create({projectId:o.id,displayName:e})),(0,f.w)(o=>(this.authenticationService.currentUserSubject.value?.trackEvents&&this.posthogService.captureEvent("collection.created [Builder]",o),this.flowService.create(o.id,"Flow 1"))),(0,d.b)(o=>{this.authenticationService.currentUserSubject.value?.trackEvents&&this.posthogService.captureEvent("flow.created [Builder]",o),this.router.navigate(["/flows/",o.collectionId],{queryParams:{newCollection:!0}})}))}}}A.\u0275fac=function(e){return new(e||A)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(k.$),t.Y36(U.a),t.Y36(T.uw),t.Y36(h),t.Y36(O.W),t.Y36(L.R))},A.\u0275cmp=t.Xpm({type:A,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(v,7),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},decls:25,vars:16,consts:[[1,"ap-h-full"],["title","Flows"],[1,"ap-min-h-[70%]"],["mat-table","","aria-label","Collections",1,"ap-w-[100%]",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["class","ap-cursor-pointer hover:!ap-bg-hover","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"ap-flex","ap-justify-end"],["paginator",""],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Archive","matTooltipPosition","above",3,"click"],["src","assets/img/custom/dashboard/archive.svg",1,"ap-flex","ap-justify-center",3,"svgStyle","applyClass"],["mat-header-row",""],["mat-row","",1,"ap-cursor-pointer","hover:!ap-bg-hover",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t._UZ(2,"app-page-title",1),t.TgZ(3,"div",2)(4,"table",3),t.ynx(5,4),t.YNc(6,It,2,0,"th",5),t.YNc(7,Qt,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,Ft,2,0,"th",5),t.YNc(10,$t,3,4,"td",6),t.BQk(),t.ynx(11,8),t.YNc(12,Jt,1,0,"th",5),t.YNc(13,zt,3,3,"td",6),t.BQk(),t.YNc(14,kt,1,0,"tr",9),t.YNc(15,Ot,1,0,"tr",10),t.qZA()(),t.TgZ(16,"div",11),t._UZ(17,"app-ap-paginator",null,12),t.qZA()(),t.YNc(19,Lt,1,0,"app-empty-collections-table",13),t.ALo(20,"async"),t.YNc(21,Bt,1,0,"ng-container",13),t.ALo(22,"async"),t.YNc(23,Gt,1,0,"ng-container",13),t.ALo(24,"async")),2&e&&(t.ekj("ap-hidden",!1===t.lcZ(1,8,o.areThereCollections$)),t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(4),t.Q6J("ngIf",!1===t.lcZ(20,10,o.areThereCollections$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(22,12,o.archiveCollectionDialogClosed$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(24,14,o.createCollection$)))},dependencies:[p.O5,v,N.bk,F.RK,Q.gM,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,_,C,p.Ov,p.uU],encapsulation:2});class y{constructor(e,o){this.projectService=e,this.collectionService=o}resolve(){return this.projectService.selectedProjectAndTakeOne().pipe((0,f.w)(e=>this.collectionService.list({projectId:e.id,limit:10,cursor:""}).pipe((0,u.U)(o=>o.data.length>0))))}}y.\u0275fac=function(e){return new(e||y)(t.LFG(h),t.LFG(U.a))},y.\u0275prov=t.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"});const B="areThereCollections",qt=[{path:"",canActivate:[],children:[{path:"",pathMatch:"full",redirectTo:"/flows"},{title:"AP-Runs",path:"runs",pathMatch:"full",component:Z},{title:"AP-Flows",path:"flows",pathMatch:"full",component:A,resolve:{[B]:y}}]}];var Mt=i(7906),Ht=i(316),Kt=i(6146);class S{}S.\u0275fac=function(e){return new(e||S)},S.\u0275mod=t.oAB({type:S}),S.\u0275inj=t.cJS({imports:[p.ez,Mt.Q,g.Bz.forChild(qt),s.UX,Ht.uH,Kt.hx]})}}]);