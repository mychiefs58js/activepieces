"use strict";(self.webpackChunkactivepieces=self.webpackChunkactivepieces||[]).push([[265],{3265:(ot,U,a)=>{a.r(U),a.d(U,{AuthLayoutModule:()=>g});var l=a(1637),d=a(1666),o=a(5858),y=a(1750),Z=a(5305),_=a(1569),I=a(8418),S=a(143),t=a(7480),f=a(4896),w=a(4356),c=a(6674),N=a(9621);function A(e,n){1&e&&(t.ynx(0),t._uU(1," Email is invalid "),t.BQk())}function F(e,n){1&e&&t._uU(0,"Email is required")}function E(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,A,2,0,"ng-container",9),t.YNc(2,F,1,0,"ng-template",null,10,t.W1O),t.qZA()),2&e){const r=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.loginForm.controls.email.getError("email"))("ngIfElse",r)}}function b(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function M(e,n){1&e&&(t.TgZ(0,"mat-error",11),t._uU(1,"Invalid email or password"),t.qZA())}function J(e,n){1&e&&t.GkF(0)}class h{constructor(n,r,i){this.router=n,this.formBuilder=r,this.authenticationService=i,this.showInvalidEmailOrPasswordMessage=!1,this.loading=!1,this.loginForm=this.formBuilder.group({email:new o.NI("",{nonNullable:!0,validators:[o.kI.required,o.kI.email]}),password:new o.NI("",{nonNullable:!0,validators:[o.kI.required]})})}signIn(){if(this.loginForm.valid&&!this.loading){this.loading=!0,this.showInvalidEmailOrPasswordMessage=!1;const n=this.loginForm.getRawValue();this.authenticate$=this.authenticationService.signIn(n).pipe((0,Z.K)(r=>{throw(r.status===S.W.UNAUTHORIZED||r.status===S.W.BAD_REQUEST)&&(this.showInvalidEmailOrPasswordMessage=!0),this.loading=!1,r}),(0,_.b)(r=>{this.authenticationService.saveUser(r),this.router.navigate(["/"])}),(0,I.U)(()=>{}))}}}h.\u0275fac=function(n){return new(n||h)(t.Y36(l.F0),t.Y36(o.qu),t.Y36(f.$))},h.\u0275cmp=t.Xpm({type:h,selectors:[["ng-component"]],decls:19,vars:9,consts:[[1,"ap-typography-headline-4","ap-text-center","ap-mb-4"],[1,"ap-flex","ap-flex-col","ap-gap-2",3,"formGroup","ngSubmit"],["appearance","outline",1,"ap-w-full"],["matInput","","placeholder","Email","formControlName","email"],[4,"ngIf"],["type","password","matInput","","placeholder","Password","formControlName","password"],["class","ap-text-center",4,"ngIf"],[1,"text-center","ap-mt-2","ap-flex","ap-flex-col","ap-gap-2"],["btnColor","primary","btnSize","large",3,"loading","fullWidthOfContainer","buttonClicked"],[4,"ngIf","ngIfElse"],["emailRequired",""],[1,"ap-text-center"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t._uU(1,"Welcome Back"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return r.signIn()}),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Email"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,E,4,2,"mat-error",4),t.qZA(),t.TgZ(8,"mat-form-field",2)(9,"mat-label"),t._uU(10,"Password"),t.qZA(),t._UZ(11,"input",5),t.YNc(12,b,2,0,"mat-error",4),t.qZA(),t.YNc(13,M,2,0,"mat-error",6),t.TgZ(14,"div",7)(15,"app-button",8),t.NdJ("buttonClicked",function(){return r.signIn()}),t._uU(16," Sign in "),t.qZA()()(),t.YNc(17,J,1,0,"ng-container",4),t.ALo(18,"async")),2&n&&(t.xp6(2),t.Q6J("formGroup",r.loginForm),t.xp6(5),t.Q6J("ngIf",r.loginForm.controls.email.invalid),t.xp6(5),t.Q6J("ngIf",r.loginForm.controls.password.invalid),t.xp6(1),t.Q6J("ngIf",r.showInvalidEmailOrPasswordMessage),t.xp6(2),t.Q6J("loading",r.loading)("fullWidthOfContainer",!0),t.xp6(2),t.Q6J("ngIf",t.lcZ(18,7,r.authenticate$)))},dependencies:[d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,w.C,c.KE,c.hX,c.TO,N.Nt,d.Ov],styles:[".forgot-password[_ngcontent-%COMP%]{float:right}.auth-form-title[_ngcontent-%COMP%]{font-weight:600;color:#262626;text-align:center;font-size:24px;margin-bottom:1.563rem}.auth-button[_ngcontent-%COMP%]{padding:.5rem 0rem;border-radius:4px;transition:all .3s ease;font-weight:600;border:0px;font-size:.875rem}.auth-button[_ngcontent-%COMP%]:focus{outline:1px}.auth-links-container[_ngcontent-%COMP%]{margin-top:1.875rem;color:#8c8c8c;font-size:.875rem}.card[_ngcontent-%COMP%]{border:1px solid #e0e4e8}"],data:{animation:[y.$]}});class u{constructor(n,r){this.auth=n,this.router=r}canActivate(){return!this.auth.isLoggedIn()||(this.router.navigate(["/"]),!1)}}u.\u0275fac=function(n){return new(n||u)(t.LFG(f.$),t.LFG(l.F0))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var q=a(2553),Y=a(6710),L=a(312),B=a(2563),T=a(8883),G=a(8303);function D(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," First name is required "),t.qZA())}function R(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Last name is required "),t.qZA())}function $(e,n){1&e&&(t.ynx(0),t._uU(1," Email is invalid "),t.BQk())}function z(e,n){1&e&&(t.ynx(0),t._uU(1,"Email is already used"),t.BQk())}function W(e,n){1&e&&(t.ynx(0),t._uU(1,"Email is required"),t.BQk())}function j(e,n){if(1&e&&(t.YNc(0,z,2,0,"ng-container",5),t.YNc(1,W,2,0,"ng-container",5)),2&e){const r=t.oxw(2);t.Q6J("ngIf",r.registrationForm.controls.email.getError("alreadyInUse")),t.xp6(1),t.Q6J("ngIf",r.registrationForm.controls.email.getError("required"))}}function K(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,$,2,0,"ng-container",23),t.YNc(2,j,2,2,"ng-template",null,24,t.W1O),t.qZA()),2&e){const r=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.registrationForm.controls.email.getError("email")||i.registrationForm.controls.email.getError("invalidEmail"))("ngIfElse",r)}}function X(e,n){1&e&&(t.ynx(0),t._uU(1," Password is required "),t.BQk())}function H(e,n){1&e&&t._uU(0,"Password is invalid")}function V(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,X,2,0,"ng-container",23),t.YNc(2,H,1,0,"ng-template",null,25,t.W1O),t.qZA()),2&e){const r=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.getPasswordError("required"))("ngIfElse",r)}}function tt(e,n){1&e&&(t.TgZ(0,"p",26),t._uU(1," You have already registered with this email. "),t.qZA()),2&e&&t.Q6J("@fadeInUp",void 0)}function et(e,n){1&e&&t.GkF(0)}const s=function(){return{width:"13px",height:"13px"}};class v{constructor(n,r,i){this.formBuilder=n,this.router=r,this.authenticationService=i,this.loading=!1,this.tokenError=!1,this.emailExists=!1,this.emailChanged=!1,this.registrationForm=this.formBuilder.group({firstName:new o.NI("",{nonNullable:!0,validators:[o.kI.required]}),lastName:new o.NI("",{nonNullable:!0,validators:[o.kI.required]}),email:new o.NI("",{nonNullable:!0,validators:[o.kI.email,o.kI.pattern("^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"),o.kI.required]}),password:new o.NI("",{nonNullable:!0,validators:[o.kI.required,o.kI.minLength(8),o.kI.maxLength(64),e=>e.value&&/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e.value)?null:{specialCharacter:!0},e=>e.value&&/[A-Z]/.test(e.value)?null:{uppercase:!0},e=>e.value&&/[a-z]/.test(e.value)?null:{lowercase:!0},e=>e.value&&/[0-9]/.test(e.value)?null:{number:!0}]}),trackEvents:new o.NI(!1,{nonNullable:!0}),newsLetter:new o.NI(!1,{nonNullable:!0})})}signUp(){if(this.registrationForm.valid&&!this.loading){this.loading=!0;const n=this.registrationForm.getRawValue();this.signUp$=this.authenticationService.signUp(n).pipe((0,_.b)(r=>{this.authenticationService.saveToken(r),this.authenticationService.saveUser(r)}),(0,q.w)(()=>this.authenticationService.saveNewsLetterSubscriber(n.email)),(0,Z.K)(r=>(console.error(r),(0,Y.of)(void 0))),(0,_.b)(()=>{this.router.navigate(["/flows"])}),(0,I.U)(()=>{}))}}getPasswordError(n){return this.registrationForm.get("password")?.hasError(n)}isPasswordInputIsFocused(n){return n==document.activeElement}}v.\u0275fac=function(n){return new(n||v)(t.Y36(o.qu),t.Y36(l.F0),t.Y36(f.$))},v.\u0275cmp=t.Xpm({type:v,selectors:[["ng-component"]],decls:59,vars:43,consts:[[1,"ap-typography-headline-5","ap-text-center","ap-mb-4"],[1,"ap-flex","ap-flex-col","ap-gap-2",3,"formGroup","ngSubmit"],[1,"ap-flex","ap-gap-1","md:ap-gap-4","ap-items-center","ap-flex-col","md:ap-flex-row"],["appearance","outline",1,"ap-w-full","md:ap-w-initial"],["matInput","","placeholder","John/Jane","formControlName","firstName"],[4,"ngIf"],["matInput","","placeholder","Doe","formControlName","lastName"],["appearance","outline",1,"ap-w-full"],["matInput","","placeholder","Email","formControlName","email"],["type","password","matInput","","placeholder","Password","formControlName","password",3,"focus","blur"],[1,"hidden-trigger",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],[3,"hasBackdrop"],["menu","matMenu"],[1,"ap-mx-2"],[1,"ap-flex","ap-gap-4","ap-items-center"],["src","assets/img/custom/auth/checks/check-invalid.svg",1,"grey-check",3,"svgStyle"],["src","assets/img/custom/auth/checks/check-correct.svg",1,"green-check",3,"svgStyle"],["class","ap-text-danger ap-text-center",4,"ngIf"],["id","news_letter","color","primary","formControlName","newsLetter",1,"news_letter"],["id","trackEvents","color","primary","formControlName","trackEvents"],[1,"text-center"],["btnColor","primary",3,"loading","fullWidthOfContainer","buttonClicked"],[4,"ngIf","ngIfElse"],["otherEmailErrors",""],["invalidPasswordMessage",""],[1,"ap-text-danger","ap-text-center"]],template:function(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"div",0),t._uU(1,"Let's Get Started!"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return r.signUp()}),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"First Name"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,D,2,0,"mat-error",5),t.qZA(),t.TgZ(9,"mat-form-field",3)(10,"mat-label"),t._uU(11,"Last Name"),t.qZA(),t._UZ(12,"input",6),t.YNc(13,R,2,0,"mat-error",5),t.qZA()(),t.TgZ(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Email"),t.qZA(),t._UZ(17,"input",8),t.YNc(18,K,4,2,"mat-error",5),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21,"Password"),t.qZA(),t.TgZ(22,"input",9),t.NdJ("focus",function(){t.CHM(i);const C=t.MAs(25);return t.KtG(C.openMenu())})("blur",function(){t.CHM(i);const C=t.MAs(25);return t.KtG(C.closeMenu())}),t.qZA(),t.YNc(23,V,4,2,"mat-error",5),t._UZ(24,"div",10,11),t.qZA(),t.TgZ(26,"mat-menu",12,13)(28,"div",14)(29,"div",15),t._UZ(30,"svg-icon",16)(31,"svg-icon",17),t._uU(32," Lowercase "),t.qZA(),t.TgZ(33,"div",15),t._UZ(34,"svg-icon",16)(35,"svg-icon",17),t._uU(36," Uppercase "),t.qZA(),t.TgZ(37,"div",15),t._UZ(38,"svg-icon",16)(39,"svg-icon",17),t._uU(40," Special Character "),t.qZA(),t.TgZ(41,"div",15),t._UZ(42,"svg-icon",16)(43,"svg-icon",17),t._uU(44," Number "),t.qZA(),t.TgZ(45,"div",15),t._UZ(46,"svg-icon",16)(47,"svg-icon",17),t._uU(48," 8-64 Characters "),t.qZA()()(),t.YNc(49,tt,2,1,"p",18),t.TgZ(50,"mat-checkbox",19),t._uU(51,"Recieve updates and newsletters from activepieces"),t.qZA(),t.TgZ(52,"mat-checkbox",20),t._uU(53,"Help improve activepieces by sending data anonymously"),t.qZA(),t.TgZ(54,"div",21)(55,"app-button",22),t.NdJ("buttonClicked",function(){return r.signUp()}),t._uU(56," Sign up "),t.qZA()()(),t.YNc(57,et,1,0,"ng-container",5),t.ALo(58,"async")}if(2&n){const i=t.MAs(27);t.xp6(2),t.Q6J("formGroup",r.registrationForm),t.xp6(6),t.Q6J("ngIf",r.registrationForm.controls.firstName.invalid),t.xp6(5),t.Q6J("ngIf",r.registrationForm.controls.lastName.invalid),t.xp6(5),t.Q6J("ngIf",r.registrationForm.controls.email.invalid),t.xp6(5),t.Q6J("ngIf",r.registrationForm.controls.password.invalid),t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(2),t.Q6J("hasBackdrop",!0),t.xp6(3),t.ekj("invalid-password-condition",r.getPasswordError("lowercase")),t.xp6(1),t.Q6J("svgStyle",t.DdM(33,s)),t.xp6(1),t.Q6J("svgStyle",t.DdM(34,s)),t.xp6(2),t.ekj("invalid-password-condition",r.getPasswordError("uppercase")),t.xp6(1),t.Q6J("svgStyle",t.DdM(35,s)),t.xp6(1),t.Q6J("svgStyle",t.DdM(36,s)),t.xp6(2),t.ekj("invalid-password-condition",r.getPasswordError("specialCharacter")),t.xp6(1),t.Q6J("svgStyle",t.DdM(37,s)),t.xp6(1),t.Q6J("svgStyle",t.DdM(38,s)),t.xp6(2),t.ekj("invalid-password-condition",r.getPasswordError("number")),t.xp6(1),t.Q6J("svgStyle",t.DdM(39,s)),t.xp6(1),t.Q6J("svgStyle",t.DdM(40,s)),t.xp6(2),t.ekj("invalid-password-condition",r.getPasswordError("maxlength")||r.getPasswordError("minlength")||r.getPasswordError("required")),t.xp6(1),t.Q6J("svgStyle",t.DdM(41,s)),t.xp6(1),t.Q6J("svgStyle",t.DdM(42,s)),t.xp6(2),t.Q6J("ngIf",r.emailExists),t.xp6(6),t.Q6J("loading",r.loading)("fullWidthOfContainer",!0),t.xp6(2),t.Q6J("ngIf",t.lcZ(58,31,r.signUp$))}},dependencies:[d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,w.C,B.bk,c.KE,c.hX,c.TO,N.Nt,T.VK,T.p6,G.oG,d.Ov],styles:[".grey-check[_ngcontent-%COMP%]{display:none}.green-check[_ngcontent-%COMP%], .invalid-password-condition[_ngcontent-%COMP%]   .grey-check[_ngcontent-%COMP%]{display:block}.invalid-password-condition[_ngcontent-%COMP%]   .green-check[_ngcontent-%COMP%]{display:none}.hidden-trigger[_ngcontent-%COMP%]{left:-200px;top:0;position:absolute}@media screen and (max-width: 800px){.hidden-trigger[_ngcontent-%COMP%]{left:0;top:50px}}"],data:{animation:[L.R]}});class p{constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.isFirstSignIn().pipe((0,_.b)(n=>{n||this.router.navigate(["/"])}))}}p.\u0275fac=function(n){return new(n||p)(t.LFG(f.$),t.LFG(l.F0))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});class m{constructor(n,r){this.auth=n,this.router=r}canActivate(){return this.auth.isFirstSignIn().pipe((0,I.U)(n=>(n&&this.router.navigate(["/sign-up"]),!n)))}}m.\u0275fac=function(n){return new(n||m)(t.LFG(f.$),t.LFG(l.F0))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});const nt=[{title:"AP-Sign In",path:"sign-in",component:h,canActivate:[u,m]},{title:"AP-Sign Up",path:"sign-up",component:v,canActivate:[p]}];var rt=a(7906);class g{}g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[d.ez,l.Bz.forChild(nt),o.u5,o.UX,rt.Q]})}}]);