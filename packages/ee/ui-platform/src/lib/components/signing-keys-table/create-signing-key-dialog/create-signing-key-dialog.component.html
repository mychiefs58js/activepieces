<ap-dialog-title-template>
    Create Signing Key
</ap-dialog-title-template>

<mat-dialog-content>
    <div class="ap-w-[500px]">
        <div *ngIf="!keyCreated">
            <mat-form-field class="ap-w-full">
                <mat-label>Name</mat-label>
                <input matInput placeholder="Awesome project" [formControl]="formGroup.controls.displayName" />
                <mat-error *ngIf="formGroup.controls.displayName.invalid">Name is required </mat-error>
            </mat-form-field>
        </div>

        <div *ngIf="!!keyCreated" class="ap-flex ap-flex-col ap-gap-4">
            <div class="ap-typography-body-1 ">Your signing key (keep it with you)</div>
            <mat-form-field>
                <textarea readonly [formControl]="signingKeyFormControl" matInput rows="4"></textarea>
                <ap-icon-button [width]="15" [height]="15" matSuffix iconFilename="copy.svg" tooltipText="Copy"
                    (buttonClicked)="copyKey()"></ap-icon-button>
                <ap-icon-button [width]="15" [height]="15" matSuffix iconFilename="copy.svg" tooltipText="Copy"
                    (buttonClicked)="downloadKey()"></ap-icon-button>
            </mat-form-field>
            <div class="ap-typography-body-1">
                Read our docs to see how you will use this key to sign requests sent from your app to Activepieces (You
                will no longer find the key on Activepeices).
            </div>
            <mat-form-field>
                <mat-checkbox color="primary" [formControl]="confirmationControl">I understand I will no longer be able
                    to access this key here.
                </mat-checkbox>
            </mat-form-field>
        </div>

    </div>

</mat-dialog-content>
<mat-dialog-actions align="end">
    <div class="ap-flex ap-gap-2.5">
        <ap-button btnColor="basic" *ngIf="!keyCreated" mat-dialog-close btnSize="default" btnColor="basic">
            Cancel
        </ap-button>
        <ap-button [loading]="loading" (buttonClicked)="keyCreated? createKey():close()" btnColor="primary"
            btnSize="default" [loading]="loading" [disabled]="!confirmationControl.value">
            {{keyCreated? 'Confirm': 'Create'}}
        </ap-button>
    </div>
</mat-dialog-actions>

<ng-container *ngIf="createProject$ | async"></ng-container>